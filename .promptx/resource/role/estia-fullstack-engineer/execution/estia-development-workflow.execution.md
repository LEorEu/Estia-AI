<execution>
  <constraint>
    ## Estia AI项目技术约束
    - **架构兼容性**: 新功能必须兼容v6.0融合架构的6模块设计
    - **性能指标**: 保持588x缓存加速，不能降低现有性能表现
    - **向后兼容**: 新版本必须兼容现有数据格式和API接口
    - **资源限制**: 内存使用不超过16GB，CPU占用率不超过80%
    - **跨平台要求**: 必须同时支持Windows、Linux、macOS三大平台
    - **依赖管理**: 尽量使用项目已有依赖，新增依赖需要充分评估
  </constraint>
  
  <rule>
    ## 开发规范强制要求
    - **代码质量**: 新代码必须有对应单元测试，覆盖率不低于80%
    - **错误处理**: 所有外部调用必须有异常处理和降级方案
    - **性能考虑**: 关键路径必须有性能监控和优化措施
    - **文档同步**: 代码变更必须同步更新技术文档和注释
    - **安全规范**: 不能引入安全漏洞，外部输入必须验证和过滤
    - **版本管理**: 重大变更必须创建Git分支，通过Code Review
  </rule>
  
  <guideline>
    ## 开发最佳实践指南
    
    ### 代码组织原则
    - **单一职责**: 每个模块、类、方法专注一个核心功能
    - **松耦合设计**: 模块间通过接口交互，减少直接依赖
    - **配置外部化**: 硬编码参数提取到配置文件中
    - **错误处理分层**: 业务异常、系统异常、网络异常分类处理
    
    ### 性能优化指导
    - **缓存优先**: 重复计算的结果优先考虑缓存
    - **异步处理**: 非关键路径采用异步处理，避免阻塞主流程
    - **资源池化**: 数据库连接、HTTP连接等资源采用池化管理
    - **批量操作**: 数据库操作尽量使用批量接口，减少网络往返
    
    ### 测试策略建议
    - **测试金字塔**: 70%单元测试 + 20%集成测试 + 10%端到端测试
    - **Mock设计**: 外部依赖全面Mock化，保证测试的独立性
    - **性能基准**: 关键功能建立性能基准测试，防止性能倒退
    - **回归测试**: 重要功能变更后执行完整回归测试
  </guideline>
  
  <process>
    ## Estia AI开发工作流程
    
    ### 需求分析阶段
    ```mermaid
    flowchart TD
        A[需求接收] --> B[技术可行性分析]
        B --> C[架构影响评估]
        C --> D[性能影响评估]
        D --> E[开发工作量估算]
        E --> F[技术方案设计]
    ```
    
    #### 具体执行步骤:
    1. **需求理解确认**: 与产品方确认功能需求和验收标准
    2. **技术约束分析**: 评估现有架构的支持能力和限制
    3. **性能影响评估**: 分析对588x缓存加速等关键指标的影响
    4. **风险识别**: 识别技术风险和依赖风险
    5. **方案设计**: 设计详细的技术实现方案
    
    ### 开发实施阶段
    ```mermaid
    flowchart TD
        A[创建开发分支] --> B[编写核心逻辑]
        B --> C[编写单元测试]
        C --> D[本地功能验证]
        D --> E[集成测试]
        E --> F[性能测试]
        F --> G[代码Review]
        G --> H[合并主分支]
    ```
    
    #### TDD开发流程:
    1. **Red**: 先写失败的测试用例
    2. **Green**: 写最小可工作的代码使测试通过
    3. **Refactor**: 重构代码提高质量，保持测试通过
    4. **Repeat**: 循环执行直到功能完成
    
    ### 质量保证阶段
    ```mermaid
    flowchart TD
        A[代码静态检查] --> B[单元测试执行]
        B --> C[集成测试验证]
        C --> D[性能基准测试]
        D --> E[安全扫描]
        E --> F[文档更新]
        F --> G[发布准备]
    ```
    
    #### 质量检查清单:
    - [ ] 代码覆盖率 ≥ 80%
    - [ ] 性能指标无倒退
    - [ ] 所有测试用例通过
    - [ ] 安全漏洞扫描通过
    - [ ] 文档和注释完整
    - [ ] Code Review通过
    
    ### 部署发布阶段
    ```mermaid
    flowchart TD
        A[预生产环境部署] --> B[功能验收测试]
        B --> C[性能压力测试]
        C --> D[生产环境部署]
        D --> E[监控数据验证]
        E --> F[用户反馈收集]
    ```
    
    ### 故障排查流程
    ```mermaid
    flowchart TD
        A[问题报告] --> B[问题复现]
        B --> C[日志分析]
        C --> D[性能监控检查]
        D --> E[根因分析]
        E --> F[修复方案设计]
        F --> G[修复实施]
        G --> H[验证和监控]
    ```
    
    #### 问题分类处理:
    - **🔴 P0紧急**: 系统崩溃、数据丢失 - 2小时内响应
    - **🟡 P1重要**: 功能异常、性能下降 - 8小时内响应  
    - **🟢 P2一般**: 体验问题、优化建议 - 3天内响应
  </process>
  
  <criteria>
    ## 质量评价标准
    
    ### 代码质量标准
    - ✅ **可读性**: 代码清晰易懂，命名规范，注释充分
    - ✅ **可维护性**: 模块职责单一，耦合度低，易于修改
    - ✅ **可测试性**: 依赖可注入，边界清晰，覆盖率高
    - ✅ **性能**: 关键路径优化，资源使用合理
    - ✅ **安全性**: 输入验证完整，无明显安全漏洞
    
    ### 功能交付标准
    - ✅ **需求符合度**: 100%满足产品功能需求
    - ✅ **性能指标**: 不低于现有性能基准
    - ✅ **稳定性**: 7x24小时稳定运行
    - ✅ **兼容性**: 支持目标平台和版本
    - ✅ **用户体验**: 操作流畅，错误提示友好
    
    ### 技术架构标准
    - ✅ **架构合规**: 符合6模块管理器架构规范
    - ✅ **扩展性**: 易于添加新功能和模块
    - ✅ **监控完整**: 关键指标可观测和告警
    - ✅ **文档完善**: 技术文档和API文档齐全
    - ✅ **部署友好**: 支持自动化部署和回滚
  </criteria>
</execution>