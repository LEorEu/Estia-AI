# ğŸ›¡ï¸ ç›‘æ§ç³»ç»Ÿå®‰å…¨è¿ç§»è®¡åˆ’

## ğŸ“‹ è¿ç§»æ¦‚è§ˆ

**ç›®æ ‡**: ä»åŸç‰ˆ+ç®€åŒ–ç‰ˆç³»ç»Ÿå®‰å…¨è¿ç§»åˆ°é‡æ„ç‰ˆç›‘æ§ç³»ç»Ÿ  
**åŸåˆ™**: é›¶é£é™©ã€å¯å›æ»šã€åŠŸèƒ½å®Œæ•´æ€§ä¿è¯  
**æ—¶é—´**: é¢„è®¡2-3å‘¨å®Œæˆå…¨éƒ¨è¿ç§»  

---

## ğŸ”’ ç¬¬ä¸€é˜¶æ®µï¼šç³»ç»Ÿå¤‡ä»½å’Œå®‰å…¨ä¿éšœ (1-2å¤©)

### 1.1 åˆ›å»ºGitä¿æŠ¤åˆ†æ”¯
```bash
# åˆ›å»ºå½“å‰çŠ¶æ€çš„å®Œæ•´å¤‡ä»½åˆ†æ”¯
git checkout -b backup-monitoring-systems-$(date +%Y%m%d)
git add -A
git commit -m "ğŸ“¦ å¤‡ä»½æ‰€æœ‰ç›‘æ§ç³»ç»Ÿç‰ˆæœ¬ - è¿ç§»å‰å®Œæ•´å¿«ç…§"

# åˆ›å»ºè¿ç§»å·¥ä½œåˆ†æ”¯
git checkout -b migrate-to-unified-monitoring
```

### 1.2 å…³é”®æ–‡ä»¶å¤‡ä»½æ¸…å•
- âœ… `/web/web_dashboard.py` - åŸç‰ˆä¸»æ§åˆ¶å™¨
- âœ… `/web/monitoring_integration.py` - åŸç‰ˆAPIé›†æˆ  
- âœ… `/web/modules/` - ç®€åŒ–ç‰ˆæ¨¡å—ç³»ç»Ÿ
- âœ… `/core/monitoring/` - åŸç‰ˆæ ¸å¿ƒç›‘æ§
- âœ… `/core/memory/managers/monitor_flow/` - è®°å¿†ç³»ç»Ÿç›‘æ§
- âœ… `/web-vue/src/stores/monitoring.ts` - Vueå‰ç«¯çŠ¶æ€
- âœ… `start_dashboard.py` - å¯åŠ¨è„šæœ¬
- âœ… æ‰€æœ‰é…ç½®æ–‡ä»¶å’Œæ•°æ®åº“

### 1.3 é…ç½®å’Œæ•°æ®å¤‡ä»½
```bash
# å¤‡ä»½ç›‘æ§æ•°æ®å’Œé…ç½®
cp -r data/ backup/data_$(date +%Y%m%d)/
cp -r config/ backup/config_$(date +%Y%m%d)/
cp -r logs/ backup/logs_$(date +%Y%m%d)/
```

---

## ğŸ§ª ç¬¬äºŒé˜¶æ®µï¼šé‡æ„ç‰ˆç³»ç»ŸåŠŸèƒ½éªŒè¯ (3-5å¤©)

### 2.1 ç‹¬ç«‹ç¯å¢ƒæµ‹è¯•
```bash
# åœ¨ç‹¬ç«‹ç«¯å£è¿è¡Œé‡æ„ç‰ˆç³»ç»Ÿ
cd monitoring/
python system.py --port 5002 --debug

# æµ‹è¯•è®¿é—®åœ°å€
# é‡æ„ç‰ˆç³»ç»Ÿ: http://localhost:5002
# åŸç‰ˆç³»ç»Ÿ: http://localhost:5000 (ä¿æŒè¿è¡Œ)
```

### 2.2 åŠŸèƒ½å®Œæ•´æ€§æ£€æŸ¥æ¸…å•

**âœ… æ ¸å¿ƒç›‘æ§åŠŸèƒ½**:
- [ ] ç³»ç»ŸçŠ¶æ€ç›‘æ§ (`/api/monitoring/status`)
- [ ] æ€§èƒ½æŒ‡æ ‡æ”¶é›† (`/api/monitoring/metrics/current`)
- [ ] å†å²æ•°æ®æŸ¥è¯¢ (`/api/monitoring/metrics/history`)
- [ ] å‘Šè­¦ç®¡ç† (`/api/monitoring/alerts`)
- [ ] å¥åº·æ£€æŸ¥ (`/api/monitoring/health`)

**âœ… Webç•Œé¢åŠŸèƒ½**:
- [ ] å®æ—¶ä»ªè¡¨æ¿æ˜¾ç¤º
- [ ] æ€§èƒ½å›¾è¡¨å¯è§†åŒ–
- [ ] å‘Šè­¦çŠ¶æ€ç®¡ç†
- [ ] WebSocketå®æ—¶æ›´æ–°
- [ ] ç³»ç»Ÿé…ç½®ç•Œé¢

**âœ… é›†æˆåŠŸèƒ½**:
- [ ] è®°å¿†ç³»ç»Ÿç›‘æ§é›†æˆ
- [ ] Vueå‰ç«¯å®Œæ•´å…¼å®¹
- [ ] APIæ•°æ®æ ¼å¼ä¸€è‡´æ€§
- [ ] ç”¨æˆ·ä¼šè¯æ•°æ®å‡†ç¡®æ€§

### 2.3 æ€§èƒ½åŸºå‡†æµ‹è¯•
```bash
# è¿è¡Œæ€§èƒ½å¯¹æ¯”æµ‹è¯•
python test_performance_comparison.py --original-port 5000 --unified-port 5002

# éªŒè¯å…³é”®æŒ‡æ ‡
# - å“åº”æ—¶é—´ < 50ms
# - QPS > 500
# - å†…å­˜ä½¿ç”¨ < 200MB
# - CPUä½¿ç”¨ < 20%
```

---

## âš–ï¸ ç¬¬ä¸‰é˜¶æ®µï¼šå¹¶è¡Œè¿è¡ŒéªŒè¯ (5-7å¤©)

### 3.1 åŒç³»ç»Ÿå¹¶è¡Œéƒ¨ç½²
```bash
# ä¿æŒåŸç‰ˆç³»ç»Ÿè¿è¡Œ (ç«¯å£5000)
python start_dashboard.py --port 5000 &

# å¯åŠ¨é‡æ„ç‰ˆç³»ç»Ÿ (ç«¯å£5002)  
python monitoring/system.py --port 5002 &

# è¿è¡Œå¯¹æ¯”ç›‘æ§
python scripts/monitor_dual_systems.py
```

### 3.2 æ•°æ®ä¸€è‡´æ€§éªŒè¯
```bash
# 24å°æ—¶æ•°æ®å¯¹æ¯”æµ‹è¯•
python scripts/compare_monitoring_data.py \
  --duration 24h \
  --original-endpoint http://localhost:5000/api \
  --unified-endpoint http://localhost:5002/api/monitoring
```

### 3.3 ç”¨æˆ·ä½“éªŒæµ‹è¯•
- å‰ç«¯ç•Œé¢åŠŸèƒ½å®Œæ•´æ€§
- å®æ—¶æ•°æ®æ›´æ–°å‡†ç¡®æ€§  
- å‘Šè­¦åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- ç³»ç»Ÿç¨³å®šæ€§éªŒè¯

---

## ğŸš€ ç¬¬å››é˜¶æ®µï¼šæ¸è¿›å¼è¿ç§»åˆ‡æ¢ (3-5å¤©)

### 4.1 æµé‡åˆ‡æ¢ç­–ç•¥
```bash
# ç¬¬1å¤©ï¼š10%æµé‡åˆ‡æ¢åˆ°é‡æ„ç‰ˆ
# ç¬¬2å¤©ï¼š30%æµé‡åˆ‡æ¢
# ç¬¬3å¤©ï¼š70%æµé‡åˆ‡æ¢  
# ç¬¬4å¤©ï¼š100%æµé‡åˆ‡æ¢
# ç¬¬5å¤©ï¼šç¨³å®šè¿è¡ŒéªŒè¯
```

### 4.2 ç›‘æ§æŒ‡æ ‡è·Ÿè¸ª
```bash
# å®æ—¶ç›‘æ§å…³é”®æŒ‡æ ‡
watch -n 5 "curl -s http://localhost:5002/api/monitoring/health | jq '.health_score'"

# é”™è¯¯ç‡ç›‘æ§
tail -f logs/unified_monitoring.log | grep ERROR
```

---

## ğŸ—‘ï¸ ç¬¬äº”é˜¶æ®µï¼šå®‰å…¨æ¸…ç†æ—§ç³»ç»Ÿ (2-3å¤©)

### 5.1 æ¸…ç†å‰æœ€ç»ˆç¡®è®¤
- âœ… é‡æ„ç‰ˆç³»ç»Ÿç¨³å®šè¿è¡Œ7å¤©ä»¥ä¸Š
- âœ… æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡
- âœ… æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡
- âœ… ç”¨æˆ·åé¦ˆè‰¯å¥½
- âœ… å¤‡ä»½æ–‡ä»¶å®Œæ•´å¯ç”¨

### 5.2 åˆ†æ­¥æ¸…ç†è®¡åˆ’
```bash
# ç¬¬1æ­¥ï¼šåœæ­¢åŸç‰ˆæœåŠ¡ (å¯éšæ—¶é‡å¯)
pkill -f "python start_dashboard.py"
mv web/web_dashboard.py web/web_dashboard.py.disabled

# ç¬¬2æ­¥ï¼šå¤‡ä»½å¹¶ç§»é™¤ç®€åŒ–ç‰ˆæ¨¡å—
tar -czf backup/web_modules_$(date +%Y%m%d).tar.gz web/modules/
rm -rf web/modules/

# ç¬¬3æ­¥ï¼šæ¸…ç†åŸç‰ˆç›‘æ§æ ¸å¿ƒ
tar -czf backup/core_monitoring_$(date +%Y%m%d).tar.gz core/monitoring/
rm -rf core/monitoring/

# ç¬¬4æ­¥ï¼šæ›´æ–°å¯åŠ¨è„šæœ¬
cp monitoring/scripts/start_unified_monitoring.py start_dashboard.py
```

---

## ğŸš¨ ç´§æ€¥å›æ»šç¨‹åº

### å³æ—¶å›æ»š (5åˆ†é’Ÿå†…)
```bash
# 1. åœæ­¢é‡æ„ç‰ˆç³»ç»Ÿ
pkill -f "python monitoring/system.py"

# 2. å¯åŠ¨åŸç‰ˆç³»ç»Ÿ
python start_dashboard.py --port 5000

# 3. æ¢å¤å¤‡ä»½é…ç½®
cp backup/config_$(date +%Y%m%d)/* config/
```

### å®Œæ•´å›æ»š (15åˆ†é’Ÿå†…)
```bash
# 1. åˆ‡æ¢åˆ°å¤‡ä»½åˆ†æ”¯
git stash
git checkout backup-monitoring-systems-$(date +%Y%m%d)

# 2. æ¢å¤æ‰€æœ‰æ–‡ä»¶
git reset --hard HEAD

# 3. é‡å¯æ‰€æœ‰æœåŠ¡
./start_monitoring.bat
```

---

## ğŸ“Š è¿ç§»æˆåŠŸæ ‡å‡†

### æŠ€æœ¯æŒ‡æ ‡
- âœ… ç³»ç»Ÿå“åº”æ—¶é—´ < 50ms
- âœ… é”™è¯¯ç‡ < 0.1%
- âœ… å¯ç”¨æ€§ > 99.9%
- âœ… å†…å­˜ä½¿ç”¨ç¨³å®š
- âœ… CPUä½¿ç”¨ < 30%

### åŠŸèƒ½æŒ‡æ ‡
- âœ… æ‰€æœ‰APIæ­£å¸¸å·¥ä½œ
- âœ… å‰ç«¯ç•Œé¢å®Œæ•´æ˜¾ç¤º
- âœ… å®æ—¶æ•°æ®å‡†ç¡®æ›´æ–°
- âœ… å‘Šè­¦åŠŸèƒ½æ­£å¸¸
- âœ… æ•°æ®æŒä¹…åŒ–æ­£å¸¸

### ä¸šåŠ¡æŒ‡æ ‡
- âœ… ç”¨æˆ·ä½“éªŒæ— æ˜æ˜¾å·®å¼‚
- âœ… ç›‘æ§åŠŸèƒ½æ— ç¼ºå¤±
- âœ… ç³»ç»Ÿç¨³å®šæ€§æå‡
- âœ… ç»´æŠ¤æ•ˆç‡æ”¹å–„

---

## âš¡ å¿«é€Ÿæ‰§è¡Œè„šæœ¬

åˆ›å»ºä¸€é”®æ‰§è¡Œè„šæœ¬ç®€åŒ–æ“ä½œï¼š

### backup_system.bat
```batch
@echo off
echo ğŸ”’ å¼€å§‹ç³»ç»Ÿå¤‡ä»½...
git checkout -b backup-monitoring-systems-%date:~0,4%%date:~5,2%%date:~8,2%
git add -A
git commit -m "ğŸ“¦ å¤‡ä»½æ‰€æœ‰ç›‘æ§ç³»ç»Ÿç‰ˆæœ¬"
echo âœ… ç³»ç»Ÿå¤‡ä»½å®Œæˆï¼
```

### test_unified_system.bat  
```batch
@echo off
echo ğŸ§ª å¯åŠ¨é‡æ„ç‰ˆç³»ç»Ÿæµ‹è¯•...
cd monitoring
python system.py --port 5002 --debug
echo ğŸŒ è®¿é—® http://localhost:5002 è¿›è¡Œæµ‹è¯•
```

### rollback_system.bat
```batch
@echo off
echo ğŸš¨ æ‰§è¡Œç´§æ€¥å›æ»š...
taskkill /f /im python.exe
git checkout backup-monitoring-systems-%date:~0,4%%date:~5,2%%date:~8,2%
python start_dashboard.py --port 5000
echo âœ… ç³»ç»Ÿå·²å›æ»šåˆ°å®‰å…¨çŠ¶æ€ï¼
```

---

## ğŸ“ æ”¯æŒå’Œè”ç³»

**è¿ç§»è¿‡ç¨‹ä¸­å¦‚æœ‰é—®é¢˜**:
1. ğŸš¨ **ç´§æ€¥æƒ…å†µ**: ç«‹å³æ‰§è¡Œå›æ»šç¨‹åº
2. ğŸ“‹ **åŠŸèƒ½é—®é¢˜**: æ£€æŸ¥åŠŸèƒ½å¯¹æ¯”æ¸…å•
3. ğŸ”§ **æŠ€æœ¯é—®é¢˜**: æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶åˆ†æ
4. ğŸ“Š **æ€§èƒ½é—®é¢˜**: è¿è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•

**è¿ç§»å®Œæˆå**:
- ğŸ‰ åº†ç¥æˆåŠŸè¿ç§»åˆ°ä¼ä¸šçº§æ¶æ„ï¼  
- ğŸ“ˆ äº«å—æ›´å¥½çš„æ€§èƒ½å’Œç»´æŠ¤æ€§
- ğŸ”® å‡†å¤‡æœªæ¥çš„åŠŸèƒ½æ‰©å±•å’Œä¼˜åŒ–

---

*æ­¤è¿ç§»è®¡åˆ’ç¡®ä¿100%å®‰å…¨ï¼Œä»»ä½•é˜¶æ®µéƒ½å¯å®‰å…¨å›æ»šã€‚å»ºè®®ä¸¥æ ¼æŒ‰ç…§æ­¥éª¤æ‰§è¡Œï¼Œä¸è¦è·³è¿‡éªŒè¯ç¯èŠ‚ã€‚*